<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ</title>
    <style>
        body { text-align: center; font-family: Arial, sans-serif; margin-top: 50px; background-color: #222; color: #fff; }
        #line { width: 100px; height: 10px; background: blue; position: absolute; margin: 50px; }
        input, button { font-size: 16px; margin: 5px; padding: 5px; }
        #message { font-size: 18px; margin-top: 20px; }
        #result { font-size: 18px; margin-top: 30px; color: #FFD700; }
        #modal { display: none; background: rgba(0,0,0,0.7); color: white; padding: 20px; position: absolute; top: 30%; left: 50%; transform: translateX(-50%); border-radius: 10px; text-align: center; }
        #coins { position: fixed; top: 20px; right: 20px; font-size: 24px; color: gold; }
        #record { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); font-size: 18px; color: #FFD700; }
        #shop-button { position: fixed; bottom: 20px; left: 20px; font-size: 24px; background-color: #f1c40f; border: none; padding: 10px; border-radius: 50%; cursor: pointer; }
        #shop { display: none; position: fixed; top: 0; left: 0; width: 50%; height: 100%; background: rgba(0, 0, 0, 0.8); color: white; padding: 20px; z-index: 100; text-align: center; }
        .shop-item { margin: 20px 0; cursor: pointer; padding: 10px; background: #333; border-radius: 5px; }
        .shop-item:hover { background: #555; }
        .shop-item.disabled { background: #777; cursor: not-allowed; }
        input { background-color: transparent; color: #fff; border: none; border-bottom: 1px solid #fff; outline: none; font-size: 16px; }
        
        /* –î–ª—è —Ü–≤–µ—Ç–æ–≤ —à—Ä–∏—Ñ—Ç–∞ */
        .blue-text { color: blue; }
        .orange-text { color: orange; }
        .rainbow-text {
            background-image: linear-gradient(45deg, #FF0000, #FF7F00, #FFFF00, #00FF00, #0000FF, #4B0082, #8B00FF);
            background-size: 400% 400%;
            color: transparent;
            -webkit-background-clip: text;
            animation: rainbow-animation 5s ease infinite;
        }

        @keyframes rainbow-animation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
    </style>
</head>
<body>

<h1>–£–≥–∞–¥–∞–π —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ 100</h1>

<input type="text" id="guessInput" placeholder="–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ" onkeydown="checkEnter(event)">
<button onclick="checkGuess()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
<p id="message"></p>

<div id="line"></div>

<!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏ -->
<div id="modal">
    <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
    <p id="result"></p>
    <button onclick="closeModal()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<div id="coins">–ú–æ–Ω–µ—Ç—ã: 0</div>
<div id="record">–†–µ–∫–æ—Ä–¥: –í—Ä–µ–º—è - 0s, –û—à–∏–±–∫–∏ - 0</div>

<!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–∞–≥–∞–∑–∏–Ω–∞ -->
<button id="shop-button" onclick="openShop()">üõí</button>

<!-- –ú–∞–≥–∞–∑–∏–Ω -->
<div id="shop">
    <h2>–ú–∞–≥–∞–∑–∏–Ω</h2>
    <div class="shop-item" onclick="buyFont('blue')" id="blue-font">–°–∏–Ω–∏–π —à—Ä–∏—Ñ—Ç (10 –º–æ–Ω–µ—Ç)</div>
    <div class="shop-item" onclick="buyFont('orange')" id="orange-font">–û—Ä–∞–Ω–∂–µ–≤—ã–π —à—Ä–∏—Ñ—Ç (50 –º–æ–Ω–µ—Ç)</div>
    <div class="shop-item" onclick="buyFont('rainbow')" id="rainbow-font">–†–∞–¥—É–∂–Ω—ã–π —à—Ä–∏—Ñ—Ç (100 –º–æ–Ω–µ—Ç)</div>
    <div class="shop-item disabled">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ</div>
    <button onclick="closeShop()">–ó–∞–∫—Ä—ã—Ç—å –º–∞–≥–∞–∑–∏–Ω</button>
</div>

<script>
let number = Math.floor(Math.random() * 100) + 1; // —Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ
let line = document.getElementById('line');
let pos = 0;
let dx = 0.5; // –Ω–∞—á–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å (–æ—á–µ–Ω—å –º–µ–¥–ª–µ–Ω–Ω–æ)
let maxWidth = window.innerWidth - 120;
let maxHeight = window.innerHeight - 20; // –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è –∑–º–µ–π–∫–∏ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏
let errorCount = 0; // —Å—á—ë—Ç—á–∏–∫ –æ—à–∏–±–æ–∫
let startTime = Date.now(); // –≤—Ä–µ–º—è –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã
let gameFinished = false; // —Ñ–ª–∞–≥ –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã
let coins = 0; // –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –º–æ–Ω–µ—Ç
let oldRecord = { time: 0, errors: 0 }; // —Ä–µ–∫–æ—Ä–¥
let currentFont = "black"; // —Ç–µ–∫—É—â–∏–π —à—Ä–∏—Ñ—Ç (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —á–µ—Ä–Ω—ã–π)
let boughtFonts = { blue: false, orange: false, rainbow: false }; // –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ–º –∫—É–ø–ª–µ–Ω–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã

// –î–≤–∏–≥–∞–µ–º –∑–º–µ–π–∫—É —Ç–æ–ª—å–∫–æ —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
function moveLine() {
    pos += dx;
    if (pos > maxWidth || pos < 0) {
        // –õ–∏–Ω–∏—è –º–µ–Ω—è–µ—Ç –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ, –Ω–æ –Ω–µ –∑–∞–º–µ–¥–ª—è–µ—Ç—Å—è
        dx = -dx;
    }
    line.style.left = pos + "px";
    requestAnimationFrame(moveLine); // –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–≤–∏–≥–∞—Ç—å—Å—è —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é
}
moveLine();

function checkEnter(event) {
    if (event.key === "Enter") {
        checkGuess();
    }
}

function checkGuess() {
    if (gameFinished) return; // –µ—Å–ª–∏ –∏–≥—Ä–∞ –∑–∞–∫–æ–Ω—á–µ–Ω–∞, –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –Ω–æ–≤—ã–µ –ø–æ–ø—ã—Ç–∫–∏

    let guess = document.getElementById('guessInput').value.trim(); // –ø–æ–ª—É—á–∞–µ–º –≤–≤–µ–¥—ë–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç
    let message = document.getElementById('message');

    // –ß–∏—Ç-–∫–æ–¥
    if (guess === "–≤–∞–ª–µ—Ä–∞") {
        message.textContent = "–¢—ã –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª —á–∏—Ç-–∫–æ–¥! –ü–æ–±–µ–¥–∞!";
        line.style.background = "green";
        gameFinished = true;
        coins += 10; // –∑–∞ —á–∏—Ç-–∫–æ–¥ —Ç–æ–∂–µ –¥–∞—ë–º –º–æ–Ω–µ—Ç—ã
        document.getElementById('coins').textContent = `–ú–æ–Ω–µ—Ç—ã: ${coins}`;
        let endTime = Date.now();
        let timeTaken = (endTime - startTime) / 1000; // –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
        showModal(timeTaken, errorCount);
        return;
    }

    // –ï—Å–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –Ω–µ —á–∏—Å–ª–æ
    if (isNaN(guess)) {
        message.textContent = "–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ!";
        return;
    }

    guess = parseInt(guess); // –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ–º –≤ —á–∏—Å–ª–æ

    errorCount++; // —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—à–∏–±–æ–∫

    if (guess === number) {
        message.textContent = "–ú–æ–ª–æ–¥–µ—Ü! –£–≥–∞–¥–∞–ª!";
        line.style.background = "green";
        dx = 0.5; // —Å–±—Ä–æ—Å —Å–∫–æ—Ä–æ—Å—Ç–∏
        gameFinished = true;

        // –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏
        let endTime = Date.now();
        let timeTaken = (endTime - startTime) / 1000; // –≤—Ä–µ–º—è –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        showModal(timeTaken, errorCount);
        coins += 10; // –Ω–∞—á–∏—Å–ª—è–µ–º –º–æ–Ω–µ—Ç—ã
        document.getElementById('coins').textContent = `–ú–æ–Ω–µ—Ç—ã: ${coins}`;
    } else {
        message.textContent = "–ù–µ —É–≥–∞–¥–∞–ª! –ü–æ–ø—Ä–æ–±—É–π –µ—â—ë!";
        line.style.background = "red"; // –ª–∏–Ω–∏—è —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∫—Ä–∞—Å–Ω–æ–π
        setTimeout(() => {
            line.style.background = "blue"; // —á–µ—Ä–µ–∑ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥ –æ–Ω–∞ —Å–Ω–æ–≤–∞ —Å—Ç–∞–Ω–µ—Ç —Å–∏–Ω–µ–π
        }, 500); // —á–µ—Ä–µ–∑ 0.5 —Å–µ–∫—É–Ω–¥—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Å–∏–Ω–∏–π —Ü–≤–µ—Ç
        dx += 0.2; // –ª–∏–Ω–∏—è —É—Å–∫–æ—Ä—è–µ—Ç—Å—è
    }

    document.getElementById('guessInput').value = "";
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function showModal(time, errors) {
    let resultText = `–í—ã —É–≥–∞–¥–∞–ª–∏ —á–∏—Å–ª–æ –∑–∞ ${time.toFixed(2)} —Å–µ–∫—É–Ω–¥ —Å ${errors} –æ—à–∏–±–∫–∞–º–∏.`;
    document.getElementById('result').textContent = resultText;
    document.getElementById('modal').style.display = 'block';

    // –û–±–Ω–æ–≤–ª—è–µ–º —Ä–µ–∫–æ—Ä–¥
    if (time < oldRecord.time || oldRecord.time === 0) {
        oldRecord.time = time;
        oldRecord.errors = errors;
    }

    // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Å—Ç–∞—Ä—ã–π —Ä–µ–∫–æ—Ä–¥
    document.getElementById('record').textContent = `–†–µ–∫–æ—Ä–¥: –í—Ä–µ–º—è - ${oldRecord.time.toFixed(2)}s, –û—à–∏–±–∫–∏ - ${oldRecord.errors}`;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
function closeModal() {
    document.getElementById('modal').style.display = 'none';
    // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º –∏–≥—Ä—É
    resetGame();
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –∏–≥—Ä—ã
function resetGame() {
    number = Math.floor(Math.random() * 100) + 1; // –Ω–æ–≤–æ–µ —á–∏—Å–ª–æ
    errorCount = 0; // —Å–±—Ä–æ—Å –æ—à–∏–±–æ–∫
    startTime = Date.now(); // —Å–±—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏
    gameFinished = false; // —Å–±—Ä–æ—Å —Ñ–ª–∞–≥–∞ –∏–≥—Ä—ã
    line.style.background = 'blue'; // —Å–±—Ä–æ—Å —Ü–≤–µ—Ç–∞ –ª–∏–Ω–∏–∏
    dx = 0.5; // —Å–±—Ä–æ—Å —Å–∫–æ—Ä–æ—Å—Ç–∏ (–º–µ–¥–ª–µ–Ω–Ω–æ)
    document.getElementById('message').textContent = ""; // –æ—á–∏—Å—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
}

// –ú–∞–≥–∞–∑–∏–Ω
function openShop() {
    document.getElementById('shop').style.display = 'block';
    document.getElementById('shop-button').style.display = 'none';
}

function closeShop() {
    document.getElementById('shop').style.display = 'none';
    document.getElementById('shop-button').style.display = 'block';
}

function buyFont(color) {
    let fontPrice = { 'blue': 10, 'orange': 50, 'rainbow': 100 };

    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∫—É–ø–ª–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç
    if (boughtFonts[color]) {
        alert("–≠—Ç–æ—Ç —à—Ä–∏—Ñ—Ç —É–∂–µ –∫—É–ø–ª–µ–Ω!");
        // –ï—Å–ª–∏ —à—Ä–∏—Ñ—Ç –∫—É–ø–ª–µ–Ω, –µ–≥–æ –º–æ–∂–Ω–æ –Ω–∞–¥–µ—Ç—å
        currentFont = color;
        document.getElementById('guessInput').className = color + '-text';
        return;
    }

    if (coins >= fontPrice[color]) {
        coins -= fontPrice[color]; // —Å–ø–∏—Å—ã–≤–∞–µ–º –º–æ–Ω–µ—Ç—ã
        document.getElementById('coins').textContent = `–ú–æ–Ω–µ—Ç—ã: ${coins}`;
        boughtFonts[color] = true; // —à—Ä–∏—Ñ—Ç –∫—É–ø–ª–µ–Ω
        currentFont = color;
        // –ò–∑–º–µ–Ω—è–µ–º —Ü–≤–µ—Ç —à—Ä–∏—Ñ—Ç–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
        document.getElementById('guessInput').className = color + '-text';
    } else {
        alert("–£ –≤–∞—Å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–æ–Ω–µ—Ç!");
    }
}
</script>

</body>
</html>
